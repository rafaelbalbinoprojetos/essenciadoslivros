create table public.ai_logs (
  id uuid not null default extensions.uuid_generate_v4 (),
  usuario_id uuid null,
  mensagem_usuario text null,
  resposta_ia text null,
  metadata jsonb null,
  criado_em timestamp without time zone null default now(),
  constraint ai_logs_pkey primary key (id),
  constraint ai_logs_usuario_id_fkey foreign KEY (usuario_id) references auth.users (id) on delete CASCADE
) TABLESPACE pg_default;


create table public.assinaturas (
  id uuid not null default extensions.uuid_generate_v4 (),
  usuario_id uuid null,
  plano_id uuid null,
  ativo boolean null default true,
  data_inicio date null default CURRENT_DATE,
  data_fim date null,
  renovacao_automatica boolean null default true,
  constraint assinaturas_pkey primary key (id),
  constraint assinaturas_plano_id_fkey foreign KEY (plano_id) references planos_saas (id),
  constraint assinaturas_usuario_id_fkey foreign KEY (usuario_id) references auth.users (id) on delete CASCADE
) TABLESPACE pg_default;


create table public.evolucao (
  id uuid not null default extensions.uuid_generate_v4 (),
  usuario_id uuid null,
  peso numeric(6, 2) null,
  braco numeric(6, 2) null,
  peito numeric(6, 2) null,
  cintura numeric(6, 2) null,
  quadril numeric(6, 2) null,
  perna numeric(6, 2) null,
  gordura_corporal numeric(6, 2) null,
  data date null default CURRENT_DATE,
  criado_em timestamp without time zone null default now(),
  constraint evolucao_pkey primary key (id),
  constraint evolucao_usuario_id_fkey foreign KEY (usuario_id) references auth.users (id) on delete CASCADE
) TABLESPACE pg_default;


create table public.evolucao_fotos (
  id uuid not null default extensions.uuid_generate_v4 (),
  usuario_id uuid null,
  foto_url text not null,
  data date null default CURRENT_DATE,
  criado_em timestamp without time zone null default now(),
  constraint evolucao_fotos_pkey primary key (id),
  constraint evolucao_fotos_usuario_id_fkey foreign KEY (usuario_id) references auth.users (id) on delete CASCADE
) TABLESPACE pg_default;


create table public.execucoes (
  id uuid not null default extensions.uuid_generate_v4 (),
  treino_id uuid null,
  exercicio_id uuid null,
  series_executadas integer null,
  repeticoes_executadas text null,
  carga_executada numeric(6, 2) null,
  criado_em timestamp without time zone null default now(),
  constraint execucoes_pkey primary key (id),
  constraint execucoes_exercicio_id_fkey foreign KEY (exercicio_id) references exercicios (id) on delete set null,
  constraint execucoes_treino_id_fkey foreign KEY (treino_id) references treinos_concluidos (id) on delete CASCADE
) TABLESPACE pg_default;

create table public.exercicios (
  id uuid not null default extensions.uuid_generate_v4 (),
  nome text not null,
  grupo public.grupo_muscular not null,
  descricao text null,
  equipamento text null,
  video_url text null,
  imagem_url text null,
  criado_em timestamp without time zone null default now(),
  atualizado_em timestamp without time zone null default now(),
  constraint exercicios_pkey primary key (id)
) TABLESPACE pg_default;

create table public.ficha_exercicios (
  id uuid not null default extensions.uuid_generate_v4 (),
  ficha_id uuid null,
  series integer not null default 3,
  repeticoes text not null,
  carga numeric(6, 2) null,
  descanso_segundos integer null default 60,
  ordem integer null,
  observacoes text null,
  criado_em timestamp without time zone null default now(),
  atualizado_em timestamp without time zone null default now(),
  exercicio_id uuid null,
  constraint ficha_exercicios_pkey primary key (id),
  constraint ficha_exercicios_exercicio_id_fkey foreign KEY (exercicio_id) references exercicios (id) on delete CASCADE,
  constraint ficha_exercicios_ficha_id_fkey foreign KEY (ficha_id) references fichas (id) on delete CASCADE
) TABLESPACE pg_default;

create table public.ficha_programacao (
  id uuid not null default extensions.uuid_generate_v4 (),
  ficha_id uuid null,
  dia_semana integer not null,
  ativo boolean null default true,
  constraint ficha_programacao_pkey primary key (id),
  constraint ficha_programacao_ficha_id_fkey foreign KEY (ficha_id) references fichas (id) on delete CASCADE
) TABLESPACE pg_default;

create table public.metodos_intensificacao (
  id serial not null,
  codigo text not null,
  nome text not null,
  descricao text null,
  constraint metodos_intensificacao_pkey primary key (id),
  constraint metodos_intensificacao_codigo_key unique (codigo)
) TABLESPACE pg_default;

create table public.midias (
  id uuid not null default extensions.uuid_generate_v4 (),
  tipo text null,
  titulo text null,
  url text not null,
  criado_em timestamp without time zone null default now(),
  constraint midias_pkey primary key (id)
) TABLESPACE pg_default;

create table public.notificacoes (
  id uuid not null default extensions.uuid_generate_v4 (),
  usuario_id uuid null,
  titulo text null,
  mensagem text null,
  lida boolean null default false,
  criado_em timestamp without time zone null default now(),
  constraint notificacoes_pkey primary key (id),
  constraint notificacoes_usuario_id_fkey foreign KEY (usuario_id) references auth.users (id)
) TABLESPACE pg_default;

create table public.notificacoes (
  id uuid not null default extensions.uuid_generate_v4 (),
  usuario_id uuid null,
  titulo text null,
  mensagem text null,
  lida boolean null default false,
  criado_em timestamp without time zone null default now(),
  constraint notificacoes_pkey primary key (id),
  constraint notificacoes_usuario_id_fkey foreign KEY (usuario_id) references auth.users (id)
) TABLESPACE pg_default;


create table public.personal_records (
  id uuid not null default extensions.uuid_generate_v4 (),
  usuario_id uuid null,
  exercicio_id uuid null,
  carga numeric(6, 2) null,
  repeticoes integer null,
  data date null default CURRENT_DATE,
  constraint personal_records_pkey primary key (id),
  constraint personal_records_exercicio_id_fkey foreign KEY (exercicio_id) references exercicios (id) on delete CASCADE,
  constraint personal_records_usuario_id_fkey foreign KEY (usuario_id) references auth.users (id) on delete CASCADE
) TABLESPACE pg_default;

create table public.planos_alimentares (
  id uuid not null default extensions.uuid_generate_v4 (),
  usuario_id uuid null,
  nome text not null,
  calorias_diarias integer null,
  proteinas integer null,
  carboidratos integer null,
  gorduras integer null,
  criado_em timestamp without time zone null default now(),
  atualizado_em timestamp without time zone null default now(),
  constraint planos_alimentares_pkey primary key (id),
  constraint planos_alimentares_usuario_id_fkey foreign KEY (usuario_id) references auth.users (id) on delete CASCADE
) TABLESPACE pg_default;

create table public.planos_saas (
  id uuid not null default extensions.uuid_generate_v4 (),
  nome text not null,
  preco_mensal numeric(10, 2) null,
  descricao text null,
  recursos jsonb null,
  criado_em timestamp without time zone null default now(),
  constraint planos_saas_pkey primary key (id)
) TABLESPACE pg_default;

create table public.refeicoes (
  id uuid not null default extensions.uuid_generate_v4 (),
  plano_id uuid null,
  titulo text null,
  horario time without time zone null,
  calorias integer null,
  proteinas integer null,
  carboidratos integer null,
  gorduras integer null,
  descricao text null,
  criado_em timestamp without time zone null default now(),
  constraint refeicoes_pkey primary key (id),
  constraint refeicoes_plano_id_fkey foreign KEY (plano_id) references planos_alimentares (id) on delete CASCADE
) TABLESPACE pg_default;

create table public.treinos_concluidos (
  id uuid not null default extensions.uuid_generate_v4 (),
  usuario_id uuid null,
  ficha_id uuid null,
  data date null default CURRENT_DATE,
  duracao_minutos integer null,
  calorias_queimadas integer null,
  criado_em timestamp without time zone null default now(),
  constraint treinos_concluidos_pkey primary key (id),
  constraint treinos_concluidos_ficha_id_fkey foreign KEY (ficha_id) references fichas (id) on delete set null,
  constraint treinos_concluidos_usuario_id_fkey foreign KEY (usuario_id) references auth.users (id) on delete CASCADE
) TABLESPACE pg_default;